import e from"clsx";import t,{useState as r,useEffect as n,useRef as i,useCallback as o}from"react";var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function l(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function c(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}var s=t.createContext({activeItem:1,setActiveItem:null,stepperHeight:0,setStepperHeight:null,prevState:1,setPrevState:null,steps:[],linear:!1,visited:[],setVisited:null,noEditable:!1,vertical:!1,mobile:!1,verticalBreakpoint:!1}),p=function(i){var o=l(i,[]),c=r(!1),s=c[0],p=c[1],u=e("ripple-wave",s&&"active");return n((function(){var e=setTimeout((function(){p(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",a({className:u},o))},u=function(o){var c=o.className,s=o.rippleTag,u=o.rippleCentered,d=o.rippleDuration,f=o.rippleUnbound,m=o.rippleRadius,b=o.rippleColor,v=o.children,g=o.onClick,h=o.rippleRef,y=l(o,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick","rippleRef"]),w=i(null),E=h||w,k=[0,0,0],N=["primary","secondary","success","danger","warning","info","light","dark"],C=r([]),O=C[0],S=C[1],x=r(!1),P=x[0],R=x[1],j=e("ripple","ripple-surface",f&&"ripple-surface-unbound",P&&"ripple-surface-".concat(b),c),I=function(){if(N.find((function(e){return e===(null==b?void 0:b.toLowerCase())})))return R(!0);var e=L(b).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e));return"radial-gradient(circle, ".concat(t,")")},L=function(e){return"transparent"===e.toLowerCase()?k:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),r="rgb(1, 2, 3)";return t.style.color=r,t.style.color!==r?k:(t.style.color=e,t.style.color===r||""===t.style.color?k:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):k)},T=function(e){var t=E.current.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top,i=t.height,o=t.width,l={delay:d&&.5*d,duration:d&&d-.5*d},c=function(e){var t=e.offsetX,r=e.offsetY,n=e.height,i=e.width,o=r<=n/2,a=t<=i/2,l=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},c=r===n/2&&t===i/2,s=!0===o&&!1===a,p=!0===o&&!0===a,u=!1===o&&!0===a,d=!1===o&&!1===a,f={topLeft:l(t,r),topRight:l(i-t,r),bottomLeft:l(t,n-r),bottomRight:l(i-t,n-r)},m=0;return c||d?m=f.topLeft:u?m=f.topRight:p?m=f.bottomRight:s&&(m=f.bottomLeft),2*m}({offsetX:u?i/2:r,offsetY:u?o/2:n,height:i,width:o}),s=m||c/2,p={left:"".concat(u?o/2-s:r-s,"px"),top:"".concat(u?i/2-s:n-s,"px"),height:"".concat(m?2*m:c,"px"),width:"".concat(m?2*m:c,"px"),transitionDelay:"0s, ".concat(l.delay,"ms"),transitionDuration:"".concat(d,"ms, ").concat(l.duration,"ms")};return P?p:a(a({},p),{backgroundImage:"".concat(I())})};return n((function(){var e=setTimeout((function(){O.length>0&&S(O.splice(1,O.length-1))}),d);return function(){clearTimeout(e)}}),[d,O]),t.createElement(s,a({className:j,onClick:function(e){return function(e){var t=T(e),r=O.concat(t);S(r),g&&g(e)}(e)},ref:E},y),v,O.map((function(e,r){return t.createElement(p,{key:r,style:e})})))};u.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=t.forwardRef((function(n,i){var o,c=n.className,s=n.color,p=n.outline,d=n.children,f=n.rounded,m=n.disabled,b=n.floating,v=n.size,g=n.href,h=n.block,y=n.active,w=n.toggle,E=n.noRipple,k=n.tag,N=l(n,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),C=r(y||!1),O=C[0],S=C[1],x=s&&["light","link"].includes(s)||p?"dark":"light";o="none"!==s?p?s?"btn-outline-".concat(s):"btn-outline-primary":s?"btn-".concat(s):"btn-primary":"";var P=e("none"!==s&&"btn",o,f&&"btn-rounded",b&&"btn-floating",v&&"btn-".concat(v),"".concat((g||"button"!==k)&&m?"disabled":""),h&&"btn-block",O&&"active",c);return g&&"a"!==k&&(k="a"),["hr","img","input"].includes(k)||E?t.createElement(k,a({className:P,onClick:w?function(){S(!O)}:void 0,disabled:!(!m||"button"!==k)||void 0,href:g,ref:i},N),d):t.createElement(u,a({rippleTag:k,rippleColor:x,className:P,onClick:w?function(){S(!O)}:void 0,disabled:!(!m||"button"!==k)||void 0,href:g,ref:i},N),d)}));function f(e,t,r,n){r&&n[e].classList[t](r)}function m(e,t,r,n){var i=t.length,o=!0;if(e===r-1&&(o=!1),(e>=i||e<0)&&(o=!1),n&&(e>r&&(o=!1),e>r-1||e===i-1)){var a=t[r-1];Array.prototype.slice.call(a.querySelectorAll("input[required]")).every((function(e){return!0===e.checkValidity()}))||(!function(e,t){f(e,"add","stepper-invalid",t),f(e,"remove","stepper-completed",t),f(e,"add","",t),f(e,"remove","",t)}(r-1,t),o=!1)}return o}d.defaultProps={tag:"button",role:"button",color:"primary"};var b=function(p){var u=p.className,f=p.outerState,b=p.linear,v=p.formWizard,g=p.setOuterState,h=p.prevOuterState,y=p.noEditable,w=p.setPrevOuterState,E=p.mobileProgress,k=p.stepperRef,N=p.vertical,C=p.mobile,O=p.mobileBreakpoint,S=p.verticalBreakpoint,x=p.tag,P=p.children,R=l(p,["className","outerState","linear","formWizard","setOuterState","prevOuterState","noEditable","setPrevOuterState","mobileProgress","stepperRef","vertical","mobile","mobileBreakpoint","verticalBreakpoint","tag","children"]),j=r(1),I=j[0],L=j[1],T=r(0),B=T[0],z=T[1],W=r(0),A=W[0],D=W[1],q=r([]),H=q[0],X=q[1],M=r([]),V=M[0],Y=M[1],U=r(!!S||N),F=U[0],K=U[1],G=r(O?O>window.innerWidth:C),J=G[0],Q=G[1],Z=e("stepper",F?"stepper-vertical":J?"stepper-mobile":"stepper-horizontal",E&&"stepper-progress-bar",u);n((function(){S<window.innerWidth&&K(!1)}),[S]);var $=i(null),_=k||$,ee=o((function(){var e=S<window.innerWidth,t=S>window.innerWidth,r=O>window.innerWidth;e&&(Q(!1),K(!1)),t&&!r&&(Q(!1),K(!0)),r&&(Q(!0),K(!1))}),[O,S]);n((function(){if(O||S)return window.addEventListener("resize",ee),function(){window.removeEventListener("resize",ee)}}),[O,S,ee]),n((function(){var e=_.current.querySelectorAll(".stepper-step");X(e)}),[_]);return t.createElement(s.Provider,{value:{activeItem:f||I,setActiveItem:g||L,stepperHeight:A,setStepperHeight:D,prevState:h||B,setPrevState:w||z,steps:H,linear:b,visited:V,setVisited:Y,noEditable:y,vertical:F,mobile:J,verticalBreakpoint:!!S}},t.createElement(t.Fragment,null,t.createElement(x,a({className:Z,ref:_},R,{style:{height:!F&&"".concat(A,"px")}}),J&&t.createElement("div",{className:"stepper-mobile-head bg-light"},"step ",I," of ",H.length),P,J&&t.createElement("div",{className:"stepper-mobile-footer bg-light"},t.createElement("div",{className:"stepper-back-btn"},t.createElement("button",{className:"btn btn-link",onClick:function(){1!==I&&z(I),I>=2&&L(I-1)}},t.createElement("i",{className:"fas fa-chevron-left"}),"BACK")),E&&t.createElement("div",{className:"stepper-mobile-progress gray-500"},t.createElement("div",{className:"stepper-mobile-progress-bar bg-primary",style:{width:"".concat(I/H.length*100,"%")}})),t.createElement("div",{className:"stepper-next-btn"},t.createElement("button",{className:"btn btn-link ripple-surface",onClick:function(){I!==H.length&&z(I),I<=H.length-1&&L(I+1)}},"NEXT",t.createElement("i",{className:"fas fa-chevron-right"}))))),v&&t.createElement("div",{className:"d-flex justify-content-center px-3"},t.createElement(d,{onClick:function(){1!==I&&z(I),I>=2&&L(I-1)},className:"btn btn-primary w-100 me-2 ripple-surface"},"Previous step"),t.createElement(d,{onClick:function(){if(I!==H.length){if(b)if(V.includes(I)||Y(c(c([],V),[I])),!m(I,H,I,b))return;y&&(V.includes(I)||Y(c(c([],V),[I])),V.includes(I+1))||(z(I),L(I+1))}},className:"btn btn-primary w-100"},"Next step"))))};b.defaultProps={tag:"ul"};export{b as default};
