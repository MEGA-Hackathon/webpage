"use strict";var e=require("react"),t=require("clsx");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e),a=r(t),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)};var l=function(t){var r=t.video,l=t.containerRef,i=t.lazyRef,c=t.lazyOffset,s=t.lazySrc,u=t.lazyError,f=t.lazyDelay,y=t.lazyPlaceholder,d=t.animation,v=t.className,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(t,["video","containerRef","lazyRef","lazyOffset","lazySrc","lazyError","lazyDelay","lazyPlaceholder","animation","className"]),p=e.useRef(null),z=i||p,O=e.useState(y||"..."),g=O[0],w=O[1],b=e.useState(!1),h=b[0],E=b[1],j=e.useState(!1),P=j[0],R=j[1],S=a.default("none"!==d&&h&&"animation ".concat(d),v),L=e.useCallback((function(){var e=z.current.getBoundingClientRect();if(l){var t=l.current.getBoundingClientRect();t.y>0&&t.y<window.innerHeight&&e.y>=t.y&&e.y<=t.y+t.height&&e.y<=window.innerHeight&&R(!0)}e.top+c<=window.innerHeight&&e.bottom>=0&&R(!0)}),[c,z,l]),x=e.useCallback((function(){u&&w(u),E(!0)}),[u]);return e.useEffect((function(){P&&setTimeout((function(){s&&w(s),E(!0)}),f)}),[P,f,s]),e.useEffect((function(){var e;e=l?l.current.classList.contains("lazy-container")?window:l.current:window;var t=z.current;return e.addEventListener("scroll",L),t.addEventListener("error",x),P&&e.removeEventListener("scroll",L),function(){e.removeEventListener("scroll",L),t.removeEventListener("error",x)}}),[l,L,P,x,z]),r?n.default.createElement("video",o({className:S,src:g,ref:z},m)):n.default.createElement("img",o({className:S,src:g,ref:z},m))};l.defaultProps={lazyDelay:500,lazyOffset:0,animation:"fade-in"},module.exports=l;
