import e from"clsx";import t,{useState as n,useEffect as r,useRef as o,useCallback as a}from"react";import c from"react-dom";import{usePopper as i}from"react-popper";var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function p(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var u=function(o){var a=p(o,[]),c=n(!1),i=c[0],u=c[1],s=e("ripple-wave",i&&"active");return r((function(){var e=setTimeout((function(){u(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",l({className:s},a))},s=function(a){var c=a.className,i=a.rippleTag,s=a.rippleCentered,f=a.rippleDuration,d=a.rippleUnbound,m=a.rippleRadius,g=a.rippleColor,b=a.children,h=a.onClick,v=a.rippleRef,y=p(a,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick","rippleRef"]),C=o(null),k=v||C,w=[0,0,0],N=["primary","secondary","success","danger","warning","info","light","dark"],E=n([]),T=E[0],x=E[1],O=n(!1),R=O[0],P=O[1],j=e("ripple","ripple-surface",d&&"ripple-surface-unbound",R&&"ripple-surface-".concat(g),c),L=function(){if(N.find((function(e){return e===(null==g?void 0:g.toLowerCase())})))return P(!0);var e=B(g).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e));return"radial-gradient(circle, ".concat(t,")")},B=function(e){return"transparent"===e.toLowerCase()?w:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n?w:(t.style.color=e,t.style.color===n||""===t.style.color?w:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):w)},D=function(e){var t=k.current.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=t.height,a=t.width,c={delay:f&&.5*f,duration:f&&f-.5*f},i=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,o=e.width,a=n<=r/2,c=t<=o/2,i=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},l=n===r/2&&t===o/2,p=!0===a&&!1===c,u=!0===a&&!0===c,s=!1===a&&!0===c,f=!1===a&&!1===c,d={topLeft:i(t,n),topRight:i(o-t,n),bottomLeft:i(t,r-n),bottomRight:i(o-t,r-n)},m=0;return l||f?m=d.topLeft:s?m=d.topRight:u?m=d.bottomRight:p&&(m=d.bottomLeft),2*m}({offsetX:s?o/2:n,offsetY:s?a/2:r,height:o,width:a}),p=m||i/2,u={left:"".concat(s?a/2-p:n-p,"px"),top:"".concat(s?o/2-p:r-p,"px"),height:"".concat(m?2*m:i,"px"),width:"".concat(m?2*m:i,"px"),transitionDelay:"0s, ".concat(c.delay,"ms"),transitionDuration:"".concat(f,"ms, ").concat(c.duration,"ms")};return R?u:l(l({},u),{backgroundImage:"".concat(L())})};return r((function(){var e=setTimeout((function(){T.length>0&&x(T.splice(1,T.length-1))}),f);return function(){clearTimeout(e)}}),[f,T]),t.createElement(i,l({className:j,onClick:function(e){return function(e){var t=D(e),n=T.concat(t);x(n),h&&h(e)}(e)},ref:k},y),b,T.map((function(e,n){return t.createElement(u,{key:n,style:e})})))};s.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var f=t.forwardRef((function(r,o){var a,c=r.className,i=r.color,u=r.outline,f=r.children,d=r.rounded,m=r.disabled,g=r.floating,b=r.size,h=r.href,v=r.block,y=r.active,C=r.toggle,k=r.noRipple,w=r.tag,N=p(r,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),E=n(y||!1),T=E[0],x=E[1],O=i&&["light","link"].includes(i)||u?"dark":"light";a="none"!==i?u?i?"btn-outline-".concat(i):"btn-outline-primary":i?"btn-".concat(i):"btn-primary":"";var R=e("none"!==i&&"btn",a,d&&"btn-rounded",g&&"btn-floating",b&&"btn-".concat(b),"".concat((h||"button"!==w)&&m?"disabled":""),v&&"btn-block",T&&"active",c);return h&&"a"!==w&&(w="a"),["hr","img","input"].includes(w)||k?t.createElement(w,l({className:R,onClick:C?function(){x(!T)}:void 0,disabled:!(!m||"button"!==w)||void 0,href:h,ref:o},N),f):t.createElement(s,l({rippleTag:w,rippleColor:O,className:R,onClick:C?function(){x(!T)}:void 0,disabled:!(!m||"button"!==w)||void 0,href:h,ref:o},N),f)}));f.defaultProps={tag:"button",role:"button",color:"primary"};var d=t.forwardRef((function(n,r){var o=n.className,a=n.tag,c=n.children,i=p(n,["className","tag","children"]),u=e("popconfirm-buttons-container",o);return t.createElement(a,l({className:u,ref:r},i),c)}));d.defaultProps={tag:"div"};var m=function(o){var u=o.className,s=o.btnClassName,m=o.btnChildren,g=o.confirmBtnText,b=o.cancelBtnText,h=o.placement,v=o.tag,y=o.children,C=o.modal,k=o.poperStyle,w=o.onClick,N=o.onConfirm,E=o.options,T=o.popperTag,x=p(o,["className","btnClassName","btnChildren","confirmBtnText","cancelBtnText","placement","tag","children","modal","poperStyle","onClick","onConfirm","options","popperTag"]),O=n(),R=O[0],P=O[1],j=n(),L=j[0],B=j[1],D=n(!1),I=D[0],S=D[1],z=n(!1),M=z[0],X=z[1],Y=n(!1),F=Y[0],U=Y[1],q=i(R,L,l({placement:h},E)),A=q.styles,G=q.attributes,H=e(C?"popconfirm-modal":"popconfirm-popover","shadow-4",u),J=e("popconfirm",!C&&"fade",M&&"show"),K=a((function(e){var t=R===e.target,n=e.target===L,r=L&&L.contains(e.target),o=null==R?void 0:R.contains(e.target);t||n||r||o||S(!1)}),[L,R]);r((function(){I?(U(!0),setTimeout((function(){X(!0)}),0)):(X(!1),C?U(!1):setTimeout((function(){U(!1)}),150))}),[I,C]),r((function(){return window.addEventListener("click",K),function(){window.removeEventListener("click",K)}}),[K]);var Q=t.createElement("div",{className:J},y,t.createElement(d,null,t.createElement(f,{onClick:function(){return S(!1)},color:"float",size:"sm"},b),t.createElement(f,{onClick:function(e){N&&N(e),S(!1)},size:"sm"},g)));return t.createElement(t.Fragment,null,t.createElement(v,l({onClick:function(e){S(!0),w&&w(e)},className:s},x,{ref:P}),m),F&&c.createPortal(t.createElement(t.Fragment,null,C?t.createElement("div",{className:"popconfirm-backdrop"},t.createElement(T,{ref:B,className:H},Q)):t.createElement(T,l({className:H,ref:B,style:l(l({},A.popper),k)},G.popper,{"data-testid":"popoverTestID"}),Q)),document.body))};m.defaultProps={tag:f,popperTag:"div",placement:"top",modal:!1,cancelBtnText:"Cancel",confirmBtnText:"Ok"};export{m as default};
