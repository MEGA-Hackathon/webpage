"use strict";var t=require("clsx"),e=require("react");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(t),c=n(e),i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t},i.apply(this,arguments)};function r(t){var e=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}(t),n=t.getBoundingClientRect(),o=0===e.left&&0===e.top?0:window.innerHeight-n.bottom;return i(i({},e),{bottom:o})}var l=function(t){var n=t.className,l=t.stickyRef,u=t.stickyAnimationSticky,a=t.stickyAnimationUnsticky,s=t.stickyBoundary,f=t.stickyDelay,y=t.stickyDirection,p=t.stickyOffset,d=t.stickyPosition,h=t.tag,m=t.children,g=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(n[o[c]]=t[o[c]])}return n}(t,["className","stickyRef","stickyAnimationSticky","stickyAnimationUnsticky","stickyBoundary","stickyDelay","stickyDirection","stickyOffset","stickyPosition","tag","children"]),k=e.useRef(null),b=e.useRef(null),v=l||k,w=e.useRef(""),x=e.useRef(!1),O=e.useRef(0),R=e.useRef(0),E=e.useRef(0),C=e.useState(),S=C[0],B=C[1],j=e.useState(),P=j[0],A=j[1],D=e.useState(!1),z=D[0],L=D[1],T=e.useState({}),I=T[0],N=T[1],q=e.useState(!1),U=q[0],H=q[1],F=o.default("sticky",u&&z&&"animation ".concat(u),a&&U&&"animation ".concat(a),n),Y=e.useCallback((function(){var t=b.current,e=v.current;O.current=t?t.offsetTop:e.offsetTop}),[v]),G=e.useCallback((function(){var t=v.current;t&&(E.current="top"===d?O.current-f:O.current+t.height-document.body.scrollHeight+f)}),[f,d,v]),J=e.useCallback((function(t){t>R.current?w.current="down":w.current="up"}),[]),K=function(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))},M=e.useCallback((function(){var t=b.current,e=v.current;if(t){var n=t.getBoundingClientRect().left;N({left:"".concat(n,"px")})}else N({});K(e,I),Y()}),[Y,I,v]),Q=e.useCallback((function(){var t,e=v.current,n=e.getBoundingClientRect().height,o=i({height:e.parentElement.getBoundingClientRect().height},r(e.parentElement)),c=document.querySelector(s);t=c?r(c).top-n-p:o.height+o[d]-n-p;var l,u="top"===d,a="bottom"===d,f=s,y=t<0,h=t>o.height-n;u&&(l=y&&f?{top:"".concat(p+t,"px")}:{top:"".concat(p+0,"px")}),a&&(l=y&&f?{bottom:"".concat(p+t,"px")}:h&&f?{bottom:"".concat(p+o.bottom,"px")}:{bottom:"".concat(p+0,"px")}),K(e,l)}),[s,p,d,v]),V=e.useCallback((function(){var t=window.pageYOffset||document.documentElement.scrollTop;Y(),G(),J(t);var e=[w.current,"both"].includes(y),n=E.current<=t,o=n&&!x.current&&e,c=(!n||!e)&&x.current;if(o){var i=v.current.getBoundingClientRect(),r=i.height,l=i.left,u=i.width;L(!0),A({height:"".concat(r,"px"),width:"".concat(u,"px"),opacity:"0"}),B({top:"top"===d?"".concat(0+p,"px"):null,bottom:"bottom"===d?"".concat(0+p,"px"):null,height:"".concat(r,"px"),width:"".concat(u,"px"),left:"".concat(l,"px"),zIndex:"100",position:"fixed"}),Q(),x.current=!0}c&&(a?(H(!0),setTimeout((function(){B({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),L(!1),A({height:null,width:null,opacity:null}),H(!1)}),200)):(B({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),L(!1),A({height:null,width:null,opacity:null})),x.current=!1),x.current&&(K(v.current,I),Q()),R.current=t<=0?0:t}),[y,Y,G,J,p,d,v,I,Q,a]);return e.useEffect((function(){return window.addEventListener("resize",M),window.addEventListener("scroll",V),function(){window.removeEventListener("resize",M),window.removeEventListener("scroll",V)}}),[M,V]),c.default.createElement(c.default.Fragment,null,z&&c.default.createElement(h,i({className:F,ref:b,style:P},g),m),c.default.createElement(h,i({className:F,ref:v,style:S},g),m))};l.defaultProps={stickyAnimationSticky:"",stickyAnimationUnsticky:"",tag:"span",stickyBoundary:!1,stickyDelay:0,stickyDirection:"down",stickyOffset:0,stickyPosition:"top"},module.exports=l;
