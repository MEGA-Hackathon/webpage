import t from"clsx";import e,{useState as n,useRef as i,useCallback as a,useEffect as r,useContext as o}from"react";var l=function(){return l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},l.apply(this,arguments)};function c(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n}var s=function(o){var s=o.animation,u=o.animationRef,m=o.delay,d=o.infinite,f=o.duration,p=o.enableTarget,g=o.target,v=o.repeatOnScroll,y=o.reset,h=o.setTarget,E=o.start,b=o.className,w=o.tag,O=o.children,T=o.style,S=c(o,["animation","animationRef","delay","infinite","duration","enableTarget","target","repeatOnScroll","reset","setTarget","start","className","tag","children","style"]),C=n(g),I=C[0],N=C[1],x=n(!1),H=x[0],D=x[1],L=i(!0),P=t(I&&"animation",I&&s,b),j=i(null),B=u||j,F=function(){N(!I)},R=a((function(){if(B.current){var t=B.current.getBoundingClientRect().top+document.body.scrollTop,e=B.current.offsetHeight,n=t<=window.innerHeight&&t+e>=0;n&&L.current?(L.current=!1,m?setTimeout((function(){N(!0),D(!0)}),m):(N(!0),D(!0))):!n&&v&&(D(!1),L.current=!0)}}),[B,v,m]);return r((function(){return"onScroll"===E&&window.addEventListener("scroll",R),function(){window.removeEventListener("scroll",R)}}),[R,E]),r((function(){N(g)}),[g]),r((function(){"onLoad"===E&&N(!0)}),[E]),r((function(){I&&!d&&y&&setTimeout((function(){N(!I),p&&h(!1)}),f)}),[I,f,p,h,d,y]),e.createElement(e.Fragment,null,"onClick"===E&&!1===p&&e.createElement(w,l({onClick:F,className:P,ref:B},S,{style:l(l({},T),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:m?"".concat(m,"ms"):null})}),O),"onHover"===E&&!1===p&&e.createElement(w,l({onMouseEnter:F,className:P,ref:B},S,{style:l(l({},T),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:m?"".concat(m,"ms"):null})}),O),("onLoad"===E||!0===p)&&e.createElement(w,l({className:P,ref:B},S,{style:l(l({},T),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:m?"".concat(m,"ms"):null})}),O),"onScroll"===E&&e.createElement(w,l({className:P,ref:B},S,{style:l(l({},T),{animationDuration:"".concat(f,"ms"),visibility:H?"visible":"hidden",animationIterationCount:d?"infinite":null})}),O))};s.defaultProps={tag:"div",start:"onClick",duration:500,reset:!1,animation:"slide-right",target:!1,enableTarget:!1,repeatOnScroll:!1,infinite:!1};var u=e.createContext({activeItem:1,setActiveItem:null,stepperHeight:0,setStepperHeight:null,prevState:1,setPrevState:null,steps:[],linear:!1,visited:[],setVisited:null,noEditable:!1,vertical:!1,mobile:!1,verticalBreakpoint:!1}),m=e.createContext({itemId:0}),d=function(d){var f=d.className,p=d.children,g=d.tag,v=d.stepperRef,y=c(d,["className","children","tag","stepperRef"]),h=o(u),E=h.activeItem,b=h.prevState,w=h.vertical,O=o(m).itemId,T=n(!!w||O===E),S=T[0],C=T[1],I=n(!1),N=I[0],x=I[1],H=n(0),D=H[0],L=H[1],P=n({paddingTop:0,paddingBottom:0}),j=P[0],B=P[1],F=i(null),R=v||F,k=t("stepper-content","py-3",w&&!S&&"stepper-content-hide",f),z=a((function(){var t=R.current;if(t){var e=void 0;E===O?(t.style.height="",e=t.scrollHeight):e=t.scrollHeight+j.paddingTop+j.paddingBottom,t.style.height="".concat(e,"px")}}),[E,O,R,j]);return r((function(){w||C(O===E)}),[O,E,b,w]),r((function(){w||O===b&&(x(!0),setTimeout((function(){x(!1)}),800))}),[O,b,w]),r((function(){if(w){if(0===D){var t=R.current,e=t.scrollHeight,n=window.getComputedStyle(t);B({paddingTop:parseFloat(n.paddingTop),paddingBottom:parseFloat(n.paddingBottom)}),L(e)}C(O===E)}}),[R,w,O,E,D]),r((function(){if(w)return window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[w,z]),r((function(){dispatchEvent(new Event("resize"))}),[p]),e.createElement(e.Fragment,null,w?e.createElement(g,l({className:k,ref:R},y,{style:{height:"".concat(D,"px")}}),p):e.createElement(e.Fragment,null,(S||N)&&e.createElement(s,l({start:"onLoad",animation:N?E>b?"slide-out-left":E<b?"slide-out-right":"":b&&E>b?"slide-in-right":E<b?"slide-in-left":"",duration:800,className:k},y),e.createElement("span",null,p))))};d.defaultProps={tag:"div"};export{d as default};
