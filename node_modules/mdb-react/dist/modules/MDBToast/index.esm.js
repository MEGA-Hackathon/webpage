import t,{useState as e,useEffect as n,useRef as o,useCallback as r}from"react";import a from"react-dom";import c from"clsx";var i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};function l(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}var s=t.forwardRef((function(e,n){var o=e.className,r=e.color,a=e.children,s=l(e,["className","color","children"]),u=c("toast-header",r&&"bg-".concat(r),r&&"light"!==r&&"text-white",o);return t.createElement("div",i({className:u,ref:n},s),a)})),u=t.forwardRef((function(e,n){var o=e.className,r=e.children,a=e.color,s=l(e,["className","children","color"]),u=c("toast-body",a&&"light"!==a&&"text-white",o);return t.createElement("div",i({className:u,ref:n},s),r)})),f=function(o){var r=l(o,[]),a=e(!1),s=a[0],u=a[1],f=c("ripple-wave",s&&"active");return n((function(){var t=setTimeout((function(){u(!0)}),50);return function(){clearTimeout(t)}}),[]),t.createElement("div",i({className:f},r))},p=function(r){var a=r.className,s=r.rippleTag,u=r.rippleCentered,p=r.rippleDuration,d=r.rippleUnbound,m=r.rippleRadius,h=r.rippleColor,g=r.children,b=r.onClick,v=r.rippleRef,y=l(r,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick","rippleRef"]),w=o(null),C=v||w,N=[0,0,0],k=["primary","secondary","success","danger","warning","info","light","dark"],R=e([]),x=R[0],E=R[1],T=e(!1),O=T[0],L=T[1],j=c("ripple","ripple-surface",d&&"ripple-surface-unbound",O&&"ripple-surface-".concat(h),a),P=function(){if(k.find((function(t){return t===(null==h?void 0:h.toLowerCase())})))return L(!0);var t=I(h).join(","),e="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(t));return"radial-gradient(circle, ".concat(e,")")},I=function(t){return"transparent"===t.toLowerCase()?N:"#"===t[0]?function(t){return t.length<7&&(t="#".concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2]).concat(t[3]).concat(t[3])),[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}(t):(-1===t.indexOf("rgb")&&(t=function(t){var e=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return e.style.color=n,e.style.color!==n?N:(e.style.color=t,e.style.color===n||""===e.style.color?N:(t=getComputedStyle(e).color,document.body.removeChild(e),t))}(t)),0===t.indexOf("rgb")?function(t){return(t=t.match(/[.\d]+/g).map((function(t){return+Number(t)}))).length=3,t}(t):N)},B=function(t){var e=C.current.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top,r=e.height,a=e.width,c={delay:p&&.5*p,duration:p&&p-.5*p},l=function(t){var e=t.offsetX,n=t.offsetY,o=t.height,r=t.width,a=n<=o/2,c=e<=r/2,i=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},l=n===o/2&&e===r/2,s=!0===a&&!1===c,u=!0===a&&!0===c,f=!1===a&&!0===c,p=!1===a&&!1===c,d={topLeft:i(e,n),topRight:i(r-e,n),bottomLeft:i(e,o-n),bottomRight:i(r-e,o-n)},m=0;return l||p?m=d.topLeft:f?m=d.topRight:u?m=d.bottomRight:s&&(m=d.bottomLeft),2*m}({offsetX:u?r/2:n,offsetY:u?a/2:o,height:r,width:a}),s=m||l/2,f={left:"".concat(u?a/2-s:n-s,"px"),top:"".concat(u?r/2-s:o-s,"px"),height:"".concat(m?2*m:l,"px"),width:"".concat(m?2*m:l,"px"),transitionDelay:"0s, ".concat(c.delay,"ms"),transitionDuration:"".concat(p,"ms, ").concat(c.duration,"ms")};return O?f:i(i({},f),{backgroundImage:"".concat(P())})};return n((function(){var t=setTimeout((function(){x.length>0&&E(x.splice(1,x.length-1))}),p);return function(){clearTimeout(t)}}),[p,x]),t.createElement(s,i({className:j,onClick:function(t){return function(t){var e=B(t),n=x.concat(e);E(n),b&&b(t)}(t)},ref:C},y),g,x.map((function(e,n){return t.createElement(f,{key:n,style:e})})))};p.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=t.forwardRef((function(n,o){var r,a=n.className,s=n.color,u=n.outline,f=n.children,d=n.rounded,m=n.disabled,h=n.floating,g=n.size,b=n.href,v=n.block,y=n.active,w=n.toggle,C=n.noRipple,N=n.tag,k=l(n,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),R=e(y||!1),x=R[0],E=R[1],T=s&&["light","link"].includes(s)||u?"dark":"light";r="none"!==s?u?s?"btn-outline-".concat(s):"btn-outline-primary":s?"btn-".concat(s):"btn-primary":"";var O=c("none"!==s&&"btn",r,d&&"btn-rounded",h&&"btn-floating",g&&"btn-".concat(g),"".concat((b||"button"!==N)&&m?"disabled":""),v&&"btn-block",x&&"active",a);return b&&"a"!==N&&(N="a"),["hr","img","input"].includes(N)||C?t.createElement(N,i({className:O,onClick:w?function(){E(!x)}:void 0,disabled:!(!m||"button"!==N)||void 0,href:b,ref:o},k),f):t.createElement(p,i({rippleTag:N,rippleColor:T,className:O,onClick:w?function(){E(!x)}:void 0,disabled:!(!m||"button"!==N)||void 0,href:b,ref:o},k),f)}));d.defaultProps={tag:"button",role:"button",color:"primary"};var m=t.forwardRef((function(e,n){var o=e.className,r=e.white,a=e.children,s=l(e,["className","white","children"]),u=c("btn-close",r&&"btn-close-white",o);return t.createElement(d,i({className:u,color:"none",ref:n},s),a)})),h=function(f){var p=f.className,d=f.position,h=f.delay,g=f.autohide,b=f.width,v=f.containerRef,y=f.toastRef,w=f.offset,C=f.stacking,N=f.appendToBody,k=f.color,R=f.triggerRef,x=f.show,E=f.bodyContent,T=f.headerContent,O=f.bodyClasses,L=f.headerClasses,j=f.closeBtnClasses,P=l(f,["className","position","delay","autohide","width","containerRef","toastRef","offset","stacking","appendToBody","color","triggerRef","show","bodyContent","headerContent","bodyClasses","headerClasses","closeBtnClasses"]),I=e(x),B=I[0],D=I[1],S=e(x),M=S[0],X=S[1],Y=e({}),q=Y[0],z=Y[1],A=e(B?"block":"none"),U=A[0],F=A[1],G=e(0),H=G[0],J=G[1],K=o(null),Q=y||K,V=c("toast","fade",d&&!v&&"toast-fixed",d&&"toast-".concat(d),v&&"toast-absolute",k&&"bg-".concat(k),B&&M&&"show",C&&"stacking-toast",p);n((function(){var t,e;if(d){var n=d.split("-")[0],o=d.split("-")[1],r="top"===n?"bottom":"top",a="left"===o?"right":"left";z("center"===o?((t={})[n]="".concat(w&&w+H,"px"),t.left="50%",t[r]="unset",t.transform="translate(-50%)",t):((e={})[n]="".concat(w&&w+H,"px"),e[o]="".concat(w,"px"),e[r]="unset",e[a]="unset",e.transform="unset",e))}}),[w,d,H]);n((function(){if(C&&B){var t=document.querySelectorAll(".toast-".concat(d)),e=0,n=v?"toast-absolute":"toast-fixed",o=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==Q.current&&t.classList.contains(n)&&t.classList.contains("stacking-toast")}));if(o.length>0){var r=void 0;r="top"===(null==d?void 0:d.split("-")[0])?o[o.length-1].style.top:o[o.length-1].style.bottom;var a=parseInt(r.split("px")[0]);e=w?a+w:a}J(e)}}),[C,B,Q,H,w,d,v]);var W=r((function(){D(!0)}),[]);n((function(){B&&F("block"),B||M||F("none")}),[B,M]),n((function(){D(x)}),[x]),n((function(){if(null!=R){var t=R.current;return R.current.addEventListener("click",W),function(){t.removeEventListener("click",W)}}}),[R,W]),n((function(){null!=v&&v.current.classList.add("parent-toast-relative")}),[v]),n((function(){var t;return g&&B&&(t=setTimeout((function(){D(!1)}),h)),function(){clearTimeout(t)}}),[g,B,h]),n((function(){var t,e;return B?t=setTimeout((function(){X(!0)}),100):B||(e=setTimeout((function(){X(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[B,g]);var Z=t.createElement("div",i({className:V,ref:Q,style:i(i({},q),{width:"unset"===b?b:"".concat(b,"px"),display:U})},P),T&&t.createElement(s,{className:L,color:k},T,t.createElement(m,{onClick:function(){D(!1)},className:j,white:!(!k||"light"===k)})),t.createElement(u,{className:O,color:k},E));return B||M?N?a.createPortal(Z,document.body):Z:t.createElement(t.Fragment,null)};h.defaultProps={offset:10,width:"width",delay:1e3,show:!1};export{h as default};
